<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vocabulary Loop</title>
  <style>
    :root {
      color-scheme: light dark;
      --bg-sand: #f6ead4;
      --bg-mint: #d9f2e7;
      --bg-sky: #cfe3f4;
      --ink: #1f2a24;
      --ink-soft: #51615b;
      --accent: #e56a54;
      --accent-2: #1e7f6f;
      --card: rgba(255, 255, 255, 0.7);
      --border: rgba(31, 42, 36, 0.14);
      --shadow: 0 24px 60px rgba(31, 42, 36, 0.18);
      --glow-1: rgba(229, 106, 84, 0.15);
      --glow-2: rgba(30, 127, 111, 0.18);
      --orb-1: #f4b183;
      --orb-2: #7fc5b3;
      --button-bg: rgba(255, 255, 255, 0.8);
      --button-border: rgba(31, 42, 36, 0.2);
      --accent-soft: rgba(229, 106, 84, 0.12);
      --accent-border: rgba(229, 106, 84, 0.6);
      --pos-bg: rgba(30, 127, 111, 0.14);
      --pos-border: rgba(30, 127, 111, 0.35);
      --focus: rgba(30, 127, 111, 0.3);
      --hint: rgba(31, 42, 36, 0.45);
      --progress-track: rgba(31, 42, 36, 0.12);
      --note: rgba(31, 42, 36, 0.6);
      --pronounce-bg: linear-gradient(120deg, rgba(229, 106, 84, 0.16), rgba(30, 127, 111, 0.12));
      --pronounce-shadow: 0 8px 18px rgba(0, 0, 0, 0.08);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg-sand: #0f1614;
        --bg-mint: #102321;
        --bg-sky: #0b1116;
        --ink: #f1f5f2;
        --ink-soft: #b6c2bc;
        --accent: #f2a56f;
        --accent-2: #6ed2c4;
        --card: rgba(13, 20, 20, 0.86);
        --border: rgba(241, 245, 242, 0.12);
        --shadow: 0 28px 70px rgba(0, 0, 0, 0.6);
        --glow-1: rgba(242, 165, 111, 0.16);
        --glow-2: rgba(110, 210, 196, 0.18);
        --orb-1: #7a4e39;
        --orb-2: #2e645b;
        --button-bg: rgba(12, 20, 19, 0.9);
        --button-border: rgba(241, 245, 242, 0.18);
        --accent-soft: rgba(242, 165, 111, 0.2);
        --accent-border: rgba(242, 165, 111, 0.5);
        --pos-bg: rgba(110, 210, 196, 0.14);
        --pos-border: rgba(110, 210, 196, 0.4);
        --focus: rgba(110, 210, 196, 0.35);
        --hint: rgba(241, 245, 242, 0.45);
        --progress-track: rgba(241, 245, 242, 0.16);
        --note: rgba(241, 245, 242, 0.6);
        --pronounce-bg: linear-gradient(120deg, rgba(242, 165, 111, 0.18), rgba(110, 210, 196, 0.16));
        --pronounce-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
      }
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background:
        radial-gradient(1200px 400px at 10% 15%, var(--glow-1), transparent 60%),
        radial-gradient(800px 500px at 90% 10%, var(--glow-2), transparent 65%),
        linear-gradient(150deg, var(--bg-sand) 0%, var(--bg-mint) 50%, var(--bg-sky) 100%);
      color: var(--ink);
      font-family: "Avenir Next", "Gill Sans", "Trebuchet MS", "Helvetica Neue", sans-serif;
      letter-spacing: 0.2px;
      padding: 32px 20px 40px;
      overflow-x: hidden;
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      inset: auto;
      width: 320px;
      height: 320px;
      border-radius: 50%;
      filter: blur(0px);
      opacity: 0.22;
      z-index: 0;
      pointer-events: none;
      animation: drift 18s ease-in-out infinite alternate;
    }

    body::before {
      background: var(--orb-1);
      top: -80px;
      left: -60px;
      animation-delay: -3s;
    }

    body::after {
      background: var(--orb-2);
      bottom: -90px;
      right: -50px;
      animation-delay: -7s;
    }

    .shell {
      width: min(880px, 100%);
      display: grid;
      gap: 22px;
      position: relative;
      z-index: 1;
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    h1 {
      margin: 0;
      font-family: "Iowan Old Style", "Baskerville", "Garamond", "Times New Roman", serif;
      font-weight: 600;
      font-size: clamp(28px, 4vw, 40px);
    }

    .subhead {
      color: var(--ink-soft);
      font-size: 15px;
    }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 28px;
      padding: clamp(28px, 6vw, 46px);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      min-height: 320px;
      display: grid;
      gap: 18px;
      align-content: center;
      animation: rise 0.7s ease;
      cursor: pointer;
    }

    .card.no-anim .meaning,
    .card.no-anim .phrases,
    .card.no-anim .pronounce,
    .card.no-anim .progress-bar span {
      transition: none !important;
    }

    .card:focus-within {
      outline: 2px solid var(--focus);
      outline-offset: 4px;
    }

    .term {
      font-family: "Iowan Old Style", "Baskerville", "Garamond", "Times New Roman", serif;
      font-size: clamp(34px, 6vw, 56px);
      margin: 0;
      letter-spacing: 1px;
    }

    .term-row {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
    }

    .meaning {
      font-size: clamp(18px, 2.6vw, 22px);
      line-height: 1.6;
      margin: 0;
      color: var(--ink-soft);
      opacity: 1;
      transform: translateY(0px);
      transition: opacity 0.3s ease, transform 0.3s ease;
      min-height: 2.2em;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 12px;
    }

    .meaning.is-hidden {
      opacity: 0;
      transform: translateY(8px);
    }

    .pos-tag {
      display: inline-flex;
      align-items: center;
      padding: 2px 10px;
      border-radius: 999px;
      background: var(--pos-bg);
      border: 1px solid var(--pos-border);
      color: var(--accent-2);
      font-size: 12px;
      letter-spacing: 0.6px;
      font-weight: 600;
    }

    .phrases {
      margin: 0;
      padding-left: 22px;
      display: grid;
      gap: 6px;
      font-size: 15px;
      color: var(--ink);
      opacity: 1;
      transform: translateY(0px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .phrases.is-hidden {
      opacity: 0;
      transform: translateY(8px);
    }

    .pronounce {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--pronounce-bg);
      box-shadow: var(--pronounce-shadow);
      opacity: 1;
      transform: translateY(0px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .pronounce.is-hidden {
      opacity: 0;
      transform: translateY(8px);
    }

    .pronounce-label {
      font-size: 11px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--ink-soft);
    }

    .pronounce-value {
      font-weight: 700;
      color: var(--ink);
      font-size: 13px;
    }

    .hint {
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 2.4px;
      color: var(--hint);
    }

    .meta {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: center;
      justify-content: space-between;
    }

    .progress {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 14px;
      color: var(--ink-soft);
    }

    .progress-bar {
      width: 120px;
      height: 6px;
      background: var(--progress-track);
      border-radius: 999px;
      overflow: hidden;
    }

    .progress-bar span {
      display: block;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transform-origin: left;
      transform: scaleX(0);
      transition: transform 0.4s ease;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
    }

    button {
      border: 1px solid var(--button-border);
      background: var(--button-bg);
      color: var(--ink);
      padding: 10px 16px;
      border-radius: 999px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, border 0.2s ease, box-shadow 0.2s ease;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 20px rgba(31, 42, 36, 0.12);
    }

    button.primary {
      border-color: var(--accent-border);
      background: var(--accent-soft);
    }

    button:disabled {
      cursor: not-allowed;
      opacity: 0.5;
      box-shadow: none;
      transform: none;
    }

    .loop {
      font-size: 13px;
      color: var(--ink-soft);
    }

    .footer-note {
      font-size: 12px;
      color: var(--note);
    }

    @keyframes rise {
      from {
        opacity: 0;
        transform: translateY(12px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes drift {
      0% {
        transform: translate3d(0, 0, 0) scale(1);
      }
      100% {
        transform: translate3d(20px, -18px, 0) scale(1.08);
      }
    }

    @media (max-width: 600px) {
      .meta {
        flex-direction: column;
        align-items: flex-start;
      }

      .progress-bar {
        width: 160px;
      }
    }

    @media (max-width: 720px) {
      .term-row {
        align-items: flex-start;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation: none !important;
        transition: none !important;
      }
    }
  </style>
</head>
<body>
  <main class="shell">
    <header>
      <h1>Vocabulary Loop</h1>
      <div class="subhead">Flashcard flow: Enter reveals, Enter again goes next. Space hides or reveals. Tab or &lt;- goes previous. Delete removes. Tap the card if you are on mobile.</div>
    </header>

    <section class="card" aria-live="polite">
      <div class="hint" id="hint">Press Space to reveal meaning</div>
      <div class="term-row">
        <h2 class="term" id="term">Loading...</h2>
        <div class="pronounce is-hidden" id="pronounce">
          <!-- <div class="pronounce-label">Respell</div> -->
          <div class="pronounce-value" id="respell">[FOH-toh]</div>
        </div>
      </div>
      <p class="meaning is-hidden" id="meaning">
        <span class="pos-tag" id="posTag">v.</span>
        <span id="meaningText">Meaning</span>
      </p>
      <ul class="phrases is-hidden" id="phrases" aria-label="Common phrases"></ul>
    </section>

    <section class="meta">
      <div class="progress">
        <div class="progress-bar"><span id="progress"></span></div>
        <div class="count" id="count">0 / 0</div>
      </div>
      <div class="controls">
        <button class="primary" id="revealButton" type="button">Reveal/Hide (Space)</button>
        <button id="prevButton" type="button">Prev (Tab / &lt;-)</button>
        <button id="nextButton" type="button">Next (Enter)</button>
        <button id="removeButton" type="button">Remove (Delete)</button>
        <button id="undoButton" type="button" disabled>Undo Remove</button>
        <button id="resetButton" type="button">Reset Deck</button>
      </div>
      <div class="loop">Looping deck: on</div>
    </section>

    <div class="footer-note">No limits — keep cycling as long as you want.</div>
  </main>

  <script>
    const baseDeck = [
      { term: "Vacant", syllables: "Va·cant", respell: "[VAY-kunt]", pos: "adj.", meaning: "empty; not occupied", meaningZh: "空的；未被占用", phrases: ["vacant seat", "vacant position"] },
      { term: "Proximity", syllables: "Prox·im·i·ty", respell: "[prok-SIM-ih-tee]", pos: "n.", meaning: "the state of being near; closeness", meaningZh: "接近；邻近", phrases: ["close proximity", "in proximity to"] },
      { term: "Devise", syllables: "De·vise", respell: "[dih-VYZE]", pos: "v.", meaning: "to plan or invent something carefully", meaningZh: "设计；制定；想出", phrases: ["devise a plan", "devise a strategy"] },
      { term: "Mundane", syllables: "Mun·dane", respell: "[mun-DAYN]", pos: "adj.", meaning: "ordinary and not interesting", meaningZh: "平凡的；乏味的", phrases: ["mundane tasks", "mundane routine"] },
      { term: "Translucent", syllables: "Trans·lu·cent", respell: "[trans-LOO-sent]", pos: "adj.", meaning: "allowing some light to pass through; semi-transparent", meaningZh: "半透明的", phrases: ["translucent glass", "translucent curtain"] },
      { term: "Probe", syllables: "Probe", respell: "[PROHB]", pos: "v.", meaning: "to investigate or examine closely", meaningZh: "调查；探查", phrases: ["probe the issue", "probe deeper"] },
      { term: "Revive", syllables: "Re·vive", respell: "[rih-VYV]", pos: "v.", meaning: "to bring back to life or make active again", meaningZh: "复苏；恢复；使复活", phrases: ["revive interest", "revive the economy"] },
      { term: "Inhabit", syllables: "In·hab·it", respell: "[in-HAB-it]", pos: "v.", meaning: "to live in a place", meaningZh: "居住于；栖息于", phrases: ["inhabit the island", "inhabit the region"] },
      { term: "Credibility", syllables: "Cred·i·bil·i·ty", respell: "[kred-uh-BIL-ih-tee]", pos: "n.", meaning: "the quality of being believable or trustworthy", meaningZh: "可信度；可信性", phrases: ["lose credibility", "credibility gap"] },
      { term: "Lucid", syllables: "Lu·cid", respell: "[LOO-sid]", pos: "adj.", meaning: "clear and easy to understand", meaningZh: "清晰的；易懂的", phrases: ["lucid explanation", "lucid moment"] },
      { term: "Fatigue", syllables: "Fa·tigue", respell: "[fuh-TEEG]", pos: "n.", meaning: "extreme tiredness after long effort", meaningZh: "疲劳；疲惫", phrases: ["mental fatigue", "fatigue sets in"] },
      { term: "Impulse", syllables: "Im·pulse", respell: "[IM-puls]", pos: "n.", meaning: "a sudden urge to do something without thinking", meaningZh: "冲动", phrases: ["on impulse", "impulse purchase"] },
      { term: "Recede", syllables: "Re·cede", respell: "[rih-SEED]", pos: "v.", meaning: "to move back; to gradually become smaller or weaker", meaningZh: "后退；逐渐减弱", phrases: ["recede into the distance", "pain recedes"] },
      { term: "Distorted", syllables: "Dis·tort·ed", respell: "[dis-TOR-tid]", pos: "adj.", meaning: "changed in shape or meaning; twisted or unclear", meaningZh: "扭曲的；失真的", phrases: ["distorted view", "distorted sound"] },
      { term: "Deception", syllables: "De·cep·tion", respell: "[dih-SEP-shun]", pos: "n.", meaning: "the act of tricking someone by lying or hiding the truth", meaningZh: "欺骗；欺诈", phrases: ["act of deception", "deception tactics"] },
      { term: "Prosperous", syllables: "Pros·per·ous", respell: "[PROS-per-us]", pos: "adj.", meaning: "successful, wealthy, or doing well", meaningZh: "繁荣的；富裕的", phrases: ["prosperous economy", "prosperous times"] },
      { term: "Elusive", syllables: "E·lu·sive", respell: "[ih-LOO-siv]", pos: "adj.", meaning: "difficult to find, catch, or understand", meaningZh: "难以捉摸的；难以找到的", phrases: ["elusive target", "elusive answer"] },
      { term: "Bloated", syllables: "Blo·at·ed", respell: "[BLOH-tid]", pos: "adj.", meaning: "swollen; or made too big with unnecessary parts", meaningZh: "肿胀的；膨胀的", phrases: ["bloated budget", "bloated stomach"] },
      { term: "Contempt", syllables: "Con·tempt", respell: "[kun-TEMPT]", pos: "n.", meaning: "strong disrespect; the feeling that someone is beneath you", meaningZh: "轻蔑；蔑视", phrases: ["feel contempt", "open contempt"] },
      { term: "Centennial", syllables: "Cen·ten·ni·al", respell: "[sen-TEN-ee-uhl]", pos: "adj.", meaning: "relating to the 100th anniversary of something", meaningZh: "百年纪念的", phrases: ["centennial celebration", "centennial anniversary"] },
      { term: "Atrocity", syllables: "A·troc·i·ty", respell: "[uh-TROS-ih-tee]", pos: "n.", meaning: "an extremely cruel or brutal act", meaningZh: "暴行；残暴行为", phrases: ["commit an atrocity", "war atrocity"] },
      { term: "Phantoms", syllables: "Phan·toms", respell: "[FAN-tumz]", pos: "n. pl.", meaning: "ghosts; shadowy figures (real or imagined)", meaningZh: "幻影；幽灵", phrases: ["phantom pains", "phantom sounds"] },
      { term: "Negligence", syllables: "Neg·li·gence", respell: "[NEG-lih-jens]", pos: "n.", meaning: "failure to take proper care; carelessness", meaningZh: "疏忽；过失", phrases: ["gross negligence", "negligence claim"] },
      { term: "Complicity", syllables: "Com·plic·i·ty", respell: "[kum-PLIS-ih-tee]", pos: "n.", meaning: "involvement in a wrongful act, especially by helping or allowing it", meaningZh: "共谋；同谋", phrases: ["complicity in a crime", "silent complicity"] }
    ];

    let deck = baseDeck.map((item) => ({ ...item }));

    const termEl = document.getElementById("term");
    const meaningEl = document.getElementById("meaning");
    const posTagEl = document.getElementById("posTag");
    const meaningTextEl = document.getElementById("meaningText");
    const phrasesEl = document.getElementById("phrases");
    const pronounceEl = document.getElementById("pronounce");
    const respellEl = document.getElementById("respell");
    const hintEl = document.getElementById("hint");
    const countEl = document.getElementById("count");
    const progressEl = document.getElementById("progress");
    const revealButton = document.getElementById("revealButton");
    const prevButton = document.getElementById("prevButton");
    const nextButton = document.getElementById("nextButton");
    const removeButton = document.getElementById("removeButton");
    const undoButton = document.getElementById("undoButton");
    const resetButton = document.getElementById("resetButton");
    const card = document.querySelector(".card");

    let index = 0;
    let revealed = false;
    let lastRemoved = null;

    function renderInstantly(action) {
      card.classList.add("no-anim");
      action();
      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          card.classList.remove("no-anim");
        });
      });
    }

    function render() {
      if (!deck.length) {
        termEl.textContent = "No words loaded";
        meaningEl.textContent = "";
        meaningEl.classList.add("is-hidden");
        phrasesEl.innerHTML = "";
        phrasesEl.classList.add("is-hidden");
        respellEl.textContent = "";
        pronounceEl.classList.add("is-hidden");
        hintEl.textContent = "Deck empty. Press Reset to reload.";
        countEl.textContent = "0 / 0";
        progressEl.style.transform = "scaleX(0)";
        return;
      }

      const item = deck[index];
      termEl.textContent = revealed ? (item.syllables || item.term) : item.term;
      posTagEl.textContent = item.pos || "";
      posTagEl.style.display = item.pos ? "inline-flex" : "none";
      meaningTextEl.textContent = `${item.meaning} / ${item.meaningZh}`;
      meaningEl.classList.toggle("is-hidden", !revealed);
      phrasesEl.innerHTML = item.phrases.map((phrase) => `<li>${phrase}</li>`).join("");
      phrasesEl.classList.toggle("is-hidden", !revealed);
      respellEl.textContent = item.respell || "";
      pronounceEl.classList.toggle("is-hidden", !revealed);
      hintEl.textContent = revealed
        ? "Enter for next, Space hides, Tab/<- for previous, Delete removes"
        : "Enter or Space reveals meaning + phrases";
      revealButton.textContent = revealed ? "Hide (Space)" : "Reveal (Space)";
      undoButton.disabled = !lastRemoved;

      countEl.textContent = `${index + 1} / ${deck.length}`;
      const progress = (index + 1) / deck.length;
      progressEl.style.transform = `scaleX(${progress})`;
    }

    function nextCard() {
      if (!deck.length) return;
      renderInstantly(() => {
        index = (index + 1) % deck.length;
        revealed = false;
        render();
      });
    }

    function prevCard() {
      if (!deck.length) return;
      renderInstantly(() => {
        index = (index - 1 + deck.length) % deck.length;
        revealed = false;
        render();
      });
    }

    function removeCard() {
      if (!deck.length) return;
      renderInstantly(() => {
        const removedIndex = index;
        const [removed] = deck.splice(index, 1);
        lastRemoved = { item: removed, index: removedIndex };
        if (index >= deck.length) {
          index = 0;
        }
        revealed = false;
        render();
      });
    }

    function undoRemove() {
      if (!lastRemoved) return;
      renderInstantly(() => {
        const insertIndex = Math.min(lastRemoved.index, deck.length);
        deck.splice(insertIndex, 0, lastRemoved.item);
        index = insertIndex;
        lastRemoved = null;
        revealed = false;
        render();
      });
    }

    function resetDeck() {
      renderInstantly(() => {
        deck = baseDeck.map((item) => ({ ...item }));
        index = 0;
        revealed = false;
        lastRemoved = null;
        render();
      });
    }

    function toggleReveal() {
      if (!deck.length) return;
      revealed = !revealed;
      render();
    }

    document.addEventListener("keydown", (event) => {
      if (event.code === "Space") {
        event.preventDefault();
        toggleReveal();
      } else if (event.code === "Tab") {
        event.preventDefault();
        prevCard();
      } else if (event.code === "Enter") {
        event.preventDefault();
        if (revealed) {
          nextCard();
        } else {
          toggleReveal();
        }
      } else if (event.code === "ArrowLeft") {
        event.preventDefault();
        prevCard();
      } else if (event.code === "Delete" || event.code === "Backspace") {
        event.preventDefault();
        removeCard();
      }
    });

    card.addEventListener("click", () => {
      toggleReveal();
    });

    revealButton.addEventListener("click", toggleReveal);
    prevButton.addEventListener("click", prevCard);
    nextButton.addEventListener("click", nextCard);
    removeButton.addEventListener("click", removeCard);
    undoButton.addEventListener("click", undoRemove);
    resetButton.addEventListener("click", resetDeck);

    render();
  </script>
</body>
</html>
